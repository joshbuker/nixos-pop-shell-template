# NixOS

A quick rundown:

- `flake.nix`: Entrypoint for NixOS, includes:
	- Sources to build from (e.g. nixpkgs, home manager, third party flakes, etc)
	- Build targets / nixosConfigurations (usually 1:1 with `/hosts`)
- `flake.lock`: Lockfile for NixOS, allows for reproductibility.
	- This will be autogenerated when you run the rebuild script, and should be committed to your Git repo.
- `rebuild-nixos.sh`: Script for rebuilding the current NixOS system.
	- Use `--help` for optional flags and usage
- `bootstrap/`: Files and scripts to bootstrap a new host from scratch using the latest NixOS ISO
	- Does NOT get used by anything outside of the bootstrap process
- `hosts/`: Hosts the root level configuration for each device/system (aka host)
- `users/`: Hosts the root level configuration for each user, including the home manager entrypoint
- `modules/`: Hosts all of the reusable chunks of code (aka modules) for NixOS
	- This does not need to be in any particular format, completely up to you on how to structure it

An alias for the rebuild script will be automatically installed by home manager:

```sh
rebuild
```

This command replaces:

```sh
sudo apt update && sudo apt upgrade -y
```

The equivalent of running:

```sh
sudo apt dist-upgrade
```

Is updating the references to the stable version in the following files:
- `nixos/flake.nix`
- `nixos/modules/home-manager/hm-version.nix`
- `nixos/modules/nix/nixos-version.nix`

e.g. find and replace: `25.05` â†’ `26.05`

Only do this after reading the breaking changes and adjusting your configuration accordingly.
